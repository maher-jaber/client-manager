{{ form_start(form, {
    attr: {
        class: 'needs-validation',
        novalidate: 'novalidate',
        enctype: 'multipart/form-data'
    }
}) }}

<div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">
            {{ button_label|default('Enregistrer l’action') }}
        </h5>
    </div>

    <div class="card-body">
        <div class="row g-3">
            <div class="col-md-6">
                {{ form_label(form.label, 'Label Action *', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                {{ form_widget(form.label, {'attr': {'class': 'form-control', 'required': 'required'}}) }}
                <div class="invalid-feedback">
                    Ce champ est obligatoire.
                </div>
            </div>
{% if form.vars.value.logo %}
    <div class="mb-3">
        <label class="form-label fw-bold">Logo actuel :</label><br>
        <img src="{{ asset('uploads/actions/' ~ form.vars.value.logo) }}" alt="Logo actuel" class="img-thumbnail" style="max-height: 120px;">
    </div>
{% endif %}
            <div class="col-md-6">
                {{ form_label(form.logo, 'Logo (PNG/JPG)', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                {{ form_widget(form.logo, {'attr': {'class': 'form-control'}}) }}
                <div class="form-text">Taille max : 2 Mo. Formats autorisés : PNG, JPG</div>
            </div>
        </div>
    </div>

    <div class="card-footer text-end">
        <button type="submit" class="btn btn-success">
            <i class="bi bi-save me-1"></i> {{ button_label|default('Enregistrer') }}
        </button>
    </div>
</div>

{{ form_end(form) }}


{% block javascripts %} <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	 <script>
		// Validation Bootstrap
		(() => {
		  'use strict'
		  const forms = document.querySelectorAll('.needs-validation')
		  Array.from(forms).forEach(form => {
		    form.addEventListener('submit', event => {
		      if (!form.checkValidity()) {
		        event.preventDefault()
		        event.stopPropagation()
		      }
		      form.classList.add('was-validated')
		    }, false)
		  })
		})()
		
		// Initialisation des datepickers (si vous utilisez flatpickr par exemple)
		document.addEventListener('DOMContentLoaded', function() {
		    flatpickr('.datepicker', {
		        dateFormat: 'd/m/Y',
		        locale: 'fr'
		    });
		});
		</script>
{% endblock %}
