{% block stylesheets %}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

	<style>
		body {
			background-color: #f5f7fa;
		}
		.table > thead {
			background-color: #0d6efd;
			color: white;
		}
		.search-container {
			background: white;
			padding: 1rem;
			border-radius: 0.5rem;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			margin-bottom: 1rem;
		}

		.btn-group .btn {
			min-width: 200px;
			text-align: left;
		}
		.btn-outline-primary i,
		.btn-outline-primary img {
			transition: transform 0.3s ease;
		}

		.btn-outline-primary:hover i,
		.btn-outline-primary:hover img {
			transform: scale(1.2) rotate(-5deg);
		}
		th a.sorted-asc::after {
			content: ' ↑';
		}
		th a.sorted-desc::after {
			content: ' ↓';
		}
	</style>
{% endblock %}
{% set currentRoute = app.request.attributes.get('_route') %}
<nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom shadow-sm mb-3">
	<div class="container-fluid">
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
			<ul class="navbar-nav align-items-center">
				{% if app.user %}
					<li class="nav-item me-2">
						{% if currentRoute starts with 'admin_user_' %}
							<a class="btn btn-sm btn-outline-secondary" href="{{ path('switch_company') }}">
								<i class="bi bi-house-door me-1"></i>
								Accueil
							</a>
						{% else %}
							{% if is_granted('ROLE_ADMIN') %}
								<a class="btn btn-sm btn-outline-primary" href="{{ path('admin_user_index') }}">
									<i class="bi bi-people-fill me-1"></i>
									Gestion utilisateurs
								</a>
							{% endif %}
						{% endif %}
					</li>
					<li class="nav-item me-3">
						<span class="nav-link disabled text-secondary">
							<i class="bi bi-person-circle me-1"></i>
							{{ app.user.email }}
						</span>
					</li>
					<li class="nav-item">
						<a class="btn btn-sm btn-outline-danger" href="{{ path('app_logout') }}">
							<i class="bi bi-box-arrow-right me-1"></i>
							Déconnexion
						</a>
					</li>
				{% else %}
					<li class="nav-item">
						<a class="btn btn-sm btn-outline-primary" href="{{ path('app_login') }}">
							<i class="bi bi-box-arrow-in-right me-1"></i>
							Connexion
						</a>
					</li>
				{% endif %}
			</ul>
		</div>
	</div>
</nav>

<div class="container">
	{% for label, messages in app.flashes %}
		{% for message in messages %}
			<div class="alert alert-{{ label }} alert-dismissible fade show shadow-sm rounded mt-2" role="alert">
				<i class="bi bi-info-circle me-1"></i>
				{{ message|raw }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer"></button>
			</div>
		{% endfor %}
	{% endfor %}
</div>
 <script>
    // Disparition automatique après 5 secondes
    setTimeout(() => {
        document.querySelectorAll('.alert').forEach(alert => {
            alert.classList.remove('show');
            setTimeout(() => alert.remove(), 300);
        });
    }, 5000);
</script>
